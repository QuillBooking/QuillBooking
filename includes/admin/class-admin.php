<?php
/**
 * Admin: Class Admin
 *
 * @since 1.0.0
 *
 * @package QuillBooking
 * @subpackage admin
 */

namespace QuillBooking\Admin;

use QuillBooking\Traits\Singleton;

/**
 * Admin Class.
 *
 * @since 1.0.0
 */
class Admin {

	use Singleton;

	/**
	 * Constructor.
	 * Since this is a singleton class, it is better to have its constructor as a private.
	 *
	 * @since 1.0.0
	 */
	private function __construct() {
		$this->admin_hooks();
	}

	/**
	 * Admin Hooks.
	 *
	 * @since 1.0.0
	 */
	public function admin_hooks() {
		add_action( 'admin_menu', array( $this, 'create_admin_menu_pages' ) );
		add_action('admin_head', function() {
			?>
			<style>
			a.toplevel_page_quillbooking div {
				background-size: 27px auto !important;
			}

			</style>
			<?php
		});
	}

	/**
	 * Create Admin Menu Pages.
	 *
	 * @since 1.0.0
	 */
	public function create_admin_menu_pages() {
		add_menu_page(
			__( 'Quill Booking', 'quillbooking' ),
			__( 'Quill Booking', 'quillbooking' ),
			'manage_quillbooking',
			'quillbooking',
			array( Admin_Loader::class, 'page_wrapper' ),
			'data:image/svg+xml;base64,' . base64_encode(
				'<svg xmlns="http://www.w3.org/2000/svg" viewBox="540 210 897 820" width="20" height="20" xml:space="preserve">
<style>
.bg-shape { fill: #a7aaad; fill-rule:nonzero }
.fg-shape { fill: #ffffff; fill-rule:nonzero }
</style>

<g>
  <g>
    <!-- Main circular background - gray -->
    <path class="bg-shape" d="M1265.37,871.76c-29.19-42.73-50.64-91.53-86.43-128.79,89.25-150.72,3.64-366.77-164.59-414.44-74.99-29.12-156.66-14.43-226.95,19.57-132.28,70.33-187.88,244.2-126.15,379.51,39.59,90.01,119.04,153,209.96,185.41l-.69.02,58.66,28.21c4.05,1.95,8.41,4.1,13.17,6.11,4.57,1.93,9.53,3.75,14.97,5.07l-12.13,3.73c-152.15,16.12-313.04-79.43-372.3-222.42-49.81-112.78-40.13-253.06,32.11-354.31,51.66-81.36,138.48-135.51,231.2-157.63,161.99-38.61,337.07,49.86,410.02,197.31,45.68,97.01,55.08,214.51,8.34,313.32-31.68,44.4,7.48,92.35,10.81,139.35Z"/>
    
    <!-- Calendar/keyboard elements - white for contrast -->
    <g>
      <g>
        <g>
          <path class="fg-shape" d="M863.02,433.76c-.42,11.56.46,23.18-.39,34.74-2.85,14.04-22.45,19.01-32.31,9.08-7.49-6.45-5.05-17.05-5.33-25.71.35-8.13-.83-16.37.51-24.44,1.51-5.75,6.41-10.19,11.88-12.17,6.3-1.68,14-1.51,18.93,3.31,4.31,3.77,7.21,9.32,6.7,15.19Z"/>
          <path class="fg-shape" d="M1027.59,478.45c-9.77,8.6-27.82,4.39-31.53-8.51-1.53-7.96-.57-16.14-.83-24.19.18-6.01-.5-12.11.8-18.01,1.6-6.18,6.94-10.93,12.97-12.68,10.29-3.52,23.13,3.27,24.47,14.37.56,10.97-.08,21.96.23,32.94.31,5.89-1.45,12.15-6.1,16.07Z"/>
        </g>
        <g>
          <path class="fg-shape" d="M943.6,577.01v9.45c0,6.37-5.22,11.57-11.57,11.57h-9.47c-6.35,0-11.57-5.2-11.57-11.57v-9.45c0-6.37,5.22-11.57,11.57-11.57h9.47c6.35,0,11.57,5.2,11.57,11.57Z"/>
          <rect class="fg-shape" x="970.47" y="565.44" width="32.59" height="32.59" rx="11.57" ry="11.57"/>
          <g>
            <path class="fg-shape" d="M824.49,632.42v9.47c0,6.37-5.2,11.57-11.57,11.57h-9.45c-6.37,0-11.57-5.2-11.57-11.57v-9.47c0-6.35,5.2-11.57,11.57-11.57h9.45c6.37,0,11.57,5.22,11.57,11.57Z"/>
            <path class="fg-shape" d="M884.66,632.42v9.47c0,6.37-5.2,11.57-11.57,11.57h-9.45c-6.37,0-11.57-5.2-11.57-11.57v-9.47c0-6.35,5.2-11.57,11.57-11.57h9.45c6.37,0,11.57,5.22,11.57,11.57Z"/>
            <rect class="fg-shape" x="791.9" y="565.44" width="32.59" height="32.59" rx="11.57" ry="11.57"/>
            <rect class="fg-shape" x="852.07" y="565.44" width="32.59" height="32.59" rx="11.57" ry="11.57"/>
            <path class="fg-shape" d="M944.86,632.42v9.47c0,6.37-5.22,11.57-11.57,11.57h-9.47c-6.35,0-11.57-5.2-11.57-11.57v-9.47c0-6.35,5.22-11.57,11.57-11.57h9.47c6.35,0,11.57,5.22,11.57,11.57Z"/>
            <path class="fg-shape" d="M944.86,690.55v9.45c0,2.77-1,5.33-2.62,7.32-5.79-1.63-11.53-2.8-17.2-3.71-4.25-.67-8.47-1.21-12.61-1.67-.11-.63-.17-1.28-.17-1.95v-9.45c0-6.37,5.22-11.57,11.57-11.57h9.47c6.35,0,11.57,5.2,11.57,11.57Z"/>
            <path class="fg-shape" d="M1003.06,632.42v9.47c0,6.37-5.2,11.57-11.57,11.57h-9.45c-6.37,0-11.57-5.2-11.57-11.57v-9.47c0-6.35,5.2-11.57,11.57-11.57h9.45c6.37,0,11.57,5.22,11.57,11.57Z"/>
            <path class="fg-shape" d="M1061.28,632.42v9.47c0,6.37-5.2,11.57-11.57,11.57h-9.45c-6.37,0-11.57-5.2-11.57-11.57v-9.47c0-6.35,5.2-11.57,11.57-11.57h9.45c6.37,0,11.57,5.22,11.57,11.57Z"/>
            <rect class="fg-shape" x="1028.69" y="565.44" width="32.59" height="32.59" rx="11.57" ry="11.57"/>
            <path class="fg-shape" d="M1003.06,690.55v9.45c0,4.07-2.12,7.67-5.33,9.71l-27.26-10.44v-8.71c0-6.37,5.2-11.57,11.57-11.57h9.45c6.37,0,11.57,5.2,11.57,11.57Z"/>
            <rect class="fg-shape" x="1028.69" y="678.98" width="32.59" height="32.59" rx="11.57" ry="11.57"/>
            <path class="fg-shape" d="M884.66,690.55v8.95l-18.2-1.54c-3.21-1.06-6.28-1.89-9.1-2.6-1.86-.45-3.64-.87-5.29-1.28v-3.53c0-6.37,5.2-11.57,11.57-11.57h9.45c6.37,0,11.57,5.2,11.57,11.57Z"/>
          </g>
        </g>
      </g>
      <path class="bg-shape" d="M1111.53,500.04c.4-9.77.67-20.19-4.15-29.04-6.27-13.23-19.67-22.52-34.01-24.54-.22-.02-.5-.07-.72-.07-7.63-.57-15.27-.32-22.9-.2-3.98.07-7.16,3.33-7.14,7.31.02,4.48.05,8.93-.47,13.35-1.09,9.32-6.74,18.02-14.99,22.57-8.95,6.17-21.46,5.89-30.65.37-8.63-4.97-14.17-14.59-14.72-24.46-.25-3.95-.2-7.93-.17-11.91,0-4.03-3.23-7.31-7.26-7.31-26.55-.1-53.08.05-79.63.02-5.17.05-10.32-.15-15.49-.02-4.08.12-7.28,3.61-7.09,7.71.42,6.71.37,13.48-1.69,19.91-1.84,5.89-6.07,10.57-10.62,14.57-5.52,3.61-12.16,5.62-18.72,5.62-5.17,0-10.29-1.24-14.84-3.93-8.95-4.72-14.62-14.62-15.02-24.61-.15-3.93-.1-7.88-.02-11.83.05-4.05-3.18-7.36-7.21-7.41-7.48-.07-14.99-.17-22.48.32-21.43,1.94-40.15,21.13-40.08,42.91.1,47.46.07,94.9.07,142.36,2.34.9,4.3,2.11,5.79,3.28,1.54,1.19,2.69,2.36,3.53,3.38,5.99,6.36,12.38,12.31,19.12,17.7-.02-39.68-.05-79.36.05-119.04.02-4.03,3.28-7.28,7.28-7.26,40.13.15,103.82.05,128.69.02h13.28c14.22.12,28.47.12,42.69.12,39.85,0,79.71-.22,119.51.35v.32l.92,174.23.07,14.84c.02,1.02.05,2.06,0,3.11v.07c0,1.34-.07,2.69-.2,4l23.3,25.38c3.65-6.66,5.74-14.2,5.82-21.8v-.15l.15-5.67v-.07c.15-6.66.12-13.3,0-19.96v-204.56Z"/>
    </g>
  </g>
  <g>
    <path class="bg-shape" d="M1016.49,804.51c11.46-.27,22.88-1.67,34.26-2.98-2.21-6.52-4.01-13.21-7.13-19.37-5.28-11.24-13.16-21.07-21.99-29.71-7.91-7.71-17.7-13.15-27.75-17.52,10.92,14.43,20.32,30.87,22.4,49.15.68,6.76,1.69,13.7.22,20.43Z"/>
    <path class="bg-shape" d="M1055.08,801.14c10.66-.68,21.26-2.28,31.84-3.69-12.98-27.01-35.62-49.81-63.79-60.6,6.68,7.88,13.55,15.7,19.08,24.46,7.01,12.15,11.9,25.77,12.87,39.83Z"/>
    <path class="bg-shape" d="M1121.51,793.52c-6.22-8.17-13.91-14.95-20.83-22.49,1.21,8.15,1.37,16.48,3.22,24.51,5.83-.99,11.76-1.13,17.6-2.03Z"/>
    <path class="bg-shape" d="M1458.18,995.58c-7.88,6.91-17.43,11.78-27.4,14.92-15.76,5.05-32.92,3.48-48.53-1.37-24.31-7.16-44.9-22.65-64.32-38.34-18.55-15.71-35.55-33.12-52.58-50.39-3.49-3.45-7.06-6.89-10.64-10.3-2.75-2.39-5.49-4.76-8.24-7.15-.02-.02-.04-.04-.07-.05-9.4-7.48-29.96-23.54-37.49-27.4h-.02c-.25-.15-.5-.3-.72-.45-.07-.02-.17-.1-.25-.15-.99-.55-1.99-1.09-3.01-1.62-9.97-5.22-20.76-8.8-31.85-10.64-12.48-2.06-25.23,0-37.14,3.9-24.22,7.61-48.95,13.72-74.14,17.06-24.04,3.18-48.41,3.41-72.55,1.47-23.49-2.16-46.64-7.01-69.51-12.58-3.63-.82-7.11-2.21-10.84-2.61,3.21,2.98,7.58,4.1,11.39,6.07,38.14,16.56,80.43,23,121.82,19.69,20.88-1.32,41.49-5.27,61.93-9.6,16.56-3.48,32.69-8.75,49.4-11.39,11.04-1.34,22.3-1.91,33.31-.05,1.47.25,2.96.45,4.35.9,1.17.37,2.26.89,3.23,1.72-5.49,1.22-11.04,2.31-16.43,3.9-.12.05-.27.07-.4.12-13.35,4.08-24.94,12.33-34.43,22.4-3.7,3.9-7.48,7.71-11.56,11.24-2.24,1.91-4.45,3.8-5.72,4.87-12.33,10.44-26.03,19.62-41.52,24.56-22.15,7.91-46.04,9.12-69.34,7.43,13.82-4.23,26.28-12.13,37.44-21.21,6.81-5.99,13.48-12.88,16.81-21.46-12.53,13.28-28.59,23.37-46.34,27.87-19.94,5.42-41.2,4.9-61.14-.17-8.98-2.11-17.23-6.22-25.46-10.17,9.8-.4,19.37-3.58,28.04-8.01-20.51,1.94-40.9-4.33-59.2-13.15-9.15-4.33-18.15-9.07-26.23-15.22-17.65-12.95-33.96-28.34-45.35-47.21,21.48,4.7,43.23,9.35,65.34,9.3-3.63-2.36-8.08-2.86-12.06-4.43-21.95-7.06-43.98-14.92-63.45-27.55-34.76-21.95-61.98-55.59-75.95-94.28-9.62-25.19-12.65-52.46-12.01-79.31,1.47.42,2.59,1.47,3.53,2.59,14.12,15.07,30.46,28.14,48.78,37.74,16.98,9.27,35.08,16.48,53.9,21.01,10.34,3.11,21.65,4.23,30.7,10.59,7.93,5.44,15.71,11.19,22.57,17.98,8.01,7.86,14.57,17.01,21.28,25.93-3.98-17.7-13.9-33.59-26.55-46.37,21.8,1.81,44.38,3.13,64.47,12.63,30.73,14.15,54.12,42.79,62.25,75.58-21.36,1.42-42.81-.22-63.99-3.01-18.35-3.03-36.45-7.51-54.2-13.03-20.11-5.84-39.16-14.77-57.7-24.36-27.22-15.86-52.71-35.63-71.88-60.84,13.1,20.56,29.93,38.66,49.28,53.53,19.27,15.66,40.97,28.07,63.65,38.09,16.81,7.76,34.68,12.75,52.51,17.58,20.39,5.2,41.3,7.73,62.25,9.32-4.72,4.9-10.47,8.7-16.31,12.13-10.39,6.09-21.16,11.71-32.72,15.24,4.62.94,9.27-.52,13.87-.97,18.55-2.41,36.25-10.24,50.97-21.73,2.26-1.59,4.18-4.52,7.31-4.2,4.45.1,8.9-.15,13.35-.05-11.98,19.17-29.44,35.1-50.1,44.45,25.38-1.34,47.19-18.67,60.49-39.43,1.62-2.04,2.36-5.64,5.47-5.74,21.7-1.91,43.38-4.52,65.16-5.35,15.46-.92,31.15,0,46.04,4.52,3.83,1.12,7.58,2.44,11.26,3.98.07.02.25.1.55.22,13.08,5.44,25.11,13.3,35.88,22.62.02,0,.05.02.07.05,10.47,7.71,23.17,17.8,38.04,30.9,4.85,4.29,9.75,8.52,14.69,12.72,2.4,2.04,4.72,4.19,6.92,6.44l.04.04c11.06,11.19,21.23,23.47,32.2,34.76,15.59,16.04,32.07,31.25,49.5,45.25,18.77,14.54,40.43,26.55,64.37,29.06,11.26.92,22.87-.5,33.27-5.02,4-1.74,7.73-4.05,11.64-6.04Z"/>
    <path class="bg-shape" d="M1263.07,944.49c-16.69-15.09-32.18-31.62-50.41-44.93-.8-.46-2.41-1.38-3.21-1.84,6.11,5.73,11.54,12.13,16.87,18.59,18.46,21.38,37.75,42.12,59.08,60.69,18.4,16.2,38.75,31.13,62.27,38.87,14.41,4.65,30.36,7.77,45.16,3.05-21.81-.11-42.74-8.35-61.25-19.37-24.98-15.48-47.24-34.89-68.51-55.05Z"/>
  </g>
</g>
</svg>'
			),
			30
		);

		// Home.
		add_submenu_page(
			'quillbooking',
			__( 'Dashboard', 'quillbooking' ),
			__( 'Dashboard', 'quillbooking' ),
			'manage_quillbooking',
			'quillbooking',
			array( Admin_Loader::class, 'page_wrapper' )
		);

		// Calendars.
		add_submenu_page(
			'quillbooking',
			__( 'Calendars', 'quillbooking' ),
			__( 'Calendars', 'quillbooking' ),
			'manage_quillbooking',
			'quillbooking&path=calendars',
			array( Admin_Loader::class, 'page_wrapper' )
		);
		add_submenu_page(
			'quillbooking',
			__( 'Booking', 'quillbooking' ),
			__( 'Bookings', 'quillbooking' ),
			'manage_quillbooking',
			'quillbooking&path=bookings',
			array( Admin_Loader::class, 'page_wrapper' )
		);
		add_submenu_page(
			'quillbooking',
			__( 'Availability', 'quillbooking' ),
			__( 'Availability', 'quillbooking' ),
			'manage_quillbooking',
			'quillbooking&path=availability',
			array( Admin_Loader::class, 'page_wrapper' )
		);
		add_submenu_page(
			'quillbooking',
			__( 'Integrations', 'quillbooking' ),
			__( 'Integrations', 'quillbooking' ),
			'manage_quillbooking',
			'quillbooking&path=integrations',
			array( Admin_Loader::class, 'page_wrapper' )
		);

		// settings
		add_submenu_page(
			'quillbooking',
			__( 'Settings', 'quillbooking' ),
			__( 'Settings', 'quillbooking' ),
			'manage_quillbooking',
			'quillbooking&path=settings',
			array( Admin_Loader::class, 'page_wrapper' )
		);
	}
}
